<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="¡Felicidades mi amor 4 años! Este es tu primer regalo" name="description">
    <title>Códigos Secretos</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" href="img/2998143-flower-love-nature-plant-rose-valentine-day_99849.ico" type="image/x-icon">
</head>
<body>
    <div class="container">
        <form id="formulario">
            <label for="codigo">Inserta tu código:</label>
            <input type="text" id="codigo" name="codigo">
            <button type="button" onclick="validarCodigo()">Enviar</button>
        </form>
        <div id="resultado"></div>
        <div id="codigoErroneo"></div>
        <div id="codigoErrores" style="display: none;"></div>
        <button id="botonMenuPrincipal" style="display: none;" onclick="irAlMenu()">Introducir otro código</button>
    </div>
    <script>

        var codigos = {
            "1234": "No iba a ser tan fácil...",
            "2323": "Este código lo puedes canjear por una cita en el cine con la película que tú quieras",
            "4321": "Este código contiene un vale por un masaje en cualquier parte del cuerpo",
            "1405": "Este código vale por una flor",
            "6969": "Este código creo que sabes por lo que vale...",
            "2004": "Este código vale por un mensaje de cuerpo completo con crema corporal",
            "2005": "Este código vale por una foto juntos",
            "2033": "Este código vale por un día romantico",
            "0000": "Este código vale para volver a usar cualquier vale",
            "23": "Este código vale por un aniversario increible juntos"
        };

        var contadorErrores = 0;
        var contadorTotalErrores = 0;
        var ultimoCodigoCorrecto = true;

      

        function validarCodigo() {
            limpiarResultado();

            var codigoUsuario = document.getElementById("codigo").value;

            if (codigoUsuario === "") {
                return;
            }



            if (codigoUsuario in codigos) {
                if (!ultimoCodigoCorrecto) {
                    contadorErrores = 0;
                    document.getElementById("codigoErroneo").innerText = "";
                }
                ultimoCodigoCorrecto = true;


                var resultadoDiv = document.getElementById("resultado");
                resultadoDiv.style.display = "flex";
                var texto = codigos[codigoUsuario];
                resultadoDiv.innerHTML += "<span style='font-size: 20px; font-weight: bold;'>" + texto + "</span>";
                document.getElementById("botonMenuPrincipal").style.display = "inline-block";


                document.getElementById("formulario").style.display = "none";
            } else {
                ultimoCodigoCorrecto = false;
                contadorErrores++;
                contadorTotalErrores++;
                mostrarContadorErrores(contadorErrores);
                document.getElementById("codigoErrores").style.display = "none";
                var codigoErroneoDiv = document.getElementById("codigoErroneo");
                var mensaje = "¡Código Erróneo! ";
                if (contadorErrores > 1) {
                    mensaje += contadorErrores + " Errores";
                }
                codigoErroneoDiv.innerText = mensaje;
            }
        }

        function limpiarResultado() {
            var resultadoDiv = document.getElementById("resultado");
            resultadoDiv.innerHTML = "";
        }


        function mostrarContadorErrores(contador) {
            var contadorDiv = document.getElementById("codigoErroneo");
            contadorDiv.innerText = "¡Código Erróneo! " + contador + " Errores";
        }

        function irAlMenu() {
            document.getElementById("formulario").style.display = "block";
            document.getElementById("resultado").style.display = "none";
            document.getElementById("botonMenuPrincipal").style.display = "none";
        }

        document.getElementById("codigo").addEventListener("keypress", function (event) {
            if (event.keyCode === 13) {
                event.preventDefault();
                validarCodigo();
            }
        });
    </script>

</body>

</html>